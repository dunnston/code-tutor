[
  {
    "concept_id": "variables-and-types",
    "language_id": "gdscript",
    "explanation": "In GDScript, variables can be declared with 'var' keyword. GDScript is dynamically typed like Python, but you can optionally specify types for better performance and error checking. Common types include int, float, String, bool, Vector2, Vector3, and Node types.",
    "code_example": "# Dynamic typing (type inferred)\nvar player_name = \"Hero\"  # String\nvar health = 100  # int\nvar speed = 5.5  # float\nvar is_alive = true  # bool\n\n# Static typing (optional, recommended for performance)\nvar level: int = 1\nvar position: Vector2 = Vector2(100, 200)\nvar damage: float = 25.5\nvar enemy_name: String = \"Goblin\"\n\n# Type inference with :=\nvar score := 1000  # Type inferred as int\nvar velocity := Vector2(10, 0)  # Type inferred as Vector2\n\n# Godot-specific types\nvar player_node: CharacterBody2D\nvar sprite: Sprite2D\nvar timer: Timer\n\n# Constants (cannot be changed)\nconst MAX_HEALTH = 100\nconst GRAVITY = 980\nconst PLAYER_SPEED = 200.0\n\n# Enums (named constants)\nenum State {IDLE, RUNNING, JUMPING, ATTACKING}\nvar current_state = State.IDLE\n\n# Built-in types\nvar direction = Vector2.RIGHT  # Vector2(1, 0)\nvar color = Color.RED  # Color(1, 0, 0, 1)\nvar rotation_angle = deg_to_rad(45)  # Convert degrees to radians",
    "syntax_notes": "Use 'var' for variables, 'const' for constants. Type hints use colon syntax (var name: Type). := operator infers type. GDScript has Godot-specific types like Vector2, Node, etc. Use SNAKE_CASE for constants.",
    "common_mistakes": "[\"Forgetting 'var' keyword\", \"Mixing up Vector2(x, y) constructor order\", \"Not understanding the difference between var name: Type and var name := value\", \"Using mutable types as default parameters\"]"
  },
  {
    "concept_id": "operators",
    "language_id": "gdscript",
    "explanation": "GDScript supports standard arithmetic (+, -, *, /, %), comparison (==, !=, <, >, <=, >=), and logical operators (and, or, not). It also has special operators for vectors and bitwise operations.",
    "code_example": "# Arithmetic operators\nvar sum = 10 + 5  # 15\nvar difference = 10 - 5  # 5\nvar product = 10 * 5  # 50\nvar quotient = 10.0 / 5.0  # 2.0\nvar remainder = 10 % 3  # 1\nvar power = 2 ** 3  # 8 (exponentiation)\n\n# Integer division\nvar int_div = 10 / 3  # 3 (integer division if both are ints)\nvar float_div = 10.0 / 3  # 3.333...\n\n# Comparison operators\nvar is_equal = 10 == 10  # true\nvar is_greater = 10 > 5  # true\nvar is_not_equal = 10 != 5  # true\n\n# Logical operators\nvar result = true and false  # false\nvar result2 = true or false  # true\nvar result3 = not true  # false\n\n# Vector operations\nvar pos1 = Vector2(10, 20)\nvar pos2 = Vector2(5, 10)\nvar combined = pos1 + pos2  # Vector2(15, 30)\nvar scaled = pos1 * 2  # Vector2(20, 40)\nvar distance = pos1.distance_to(pos2)\n\n# Compound assignment\nvar health = 100\nhealth += 10  # health = 110\nhealth -= 20  # health = 90\nhealth *= 2  # health = 180\nhealth /= 3  # health = 60\n\n# Bitwise operators (advanced)\nvar flags = 0b1010  # Binary\nvar masked = flags & 0b1100  # AND\nvar combined_bits = flags | 0b0101  # OR\n\n# Ternary operator\nvar result = 10 if health > 50 else 5",
    "syntax_notes": "Use 'and', 'or', 'not' for logical operations (not &&, ||, !). Integer division happens automatically with ints. Vector math works naturally with operators. Ternary: value_if_true if condition else value_if_false.",
    "common_mistakes": "[\"Using && or || instead of 'and' and 'or'\", \"Forgetting that / does integer division with ints\", \"Not understanding vector operations\", \"Confusing = (assignment) with == (comparison)\"]"
  },
  {
    "concept_id": "string-manipulation",
    "language_id": "gdscript",
    "explanation": "Strings in GDScript can use single or double quotes. GDScript provides many built-in string methods and supports string formatting with % operator or format() method. Strings are immutable.",
    "code_example": "# Creating strings\nvar greeting = \"Hello, Hero!\"\nvar message = 'Welcome to the game'\nvar multiline = \"\"\"\nThis is a\nmultiline string\n\"\"\"\n\n# String concatenation\nvar full_name = \"Sir\" + \" \" + \"Lancelot\"  # \"Sir Lancelot\"\nvar greeting_msg = \"Hello, \" + full_name\n\n# String formatting with %\nvar player_name = \"Hero\"\nvar level = 5\nvar message = \"Welcome, %s! You are level %d\" % [player_name, level]\nvar health_msg = \"Health: %d/%d\" % [75, 100]\n\n# String formatting with format()\nvar formatted = \"Player: {name}, Level: {lvl}\".format({\"name\": \"Hero\", \"lvl\": 5})\n\n# String methods\nvar text = \"Hello, World!\"\nvar uppercase = text.to_upper()  # \"HELLO, WORLD!\"\nvar lowercase = text.to_lower()  # \"hello, world!\"\nvar replaced = text.replace(\"World\", \"Godot\")  # \"Hello, Godot!\"\nvar parts = text.split(\", \")  # [\"Hello\", \"World!\"]\n\n# String checking\nvar starts = text.begins_with(\"Hello\")  # true\nvar ends = text.ends_with(\"!\")  # true\nvar contains = \"World\" in text  # true\n\n# String indexing and slicing\nvar first_char = text[0]  # \"H\"\nvar substring = text.substr(0, 5)  # \"Hello\"\nvar length = text.length()  # 13\n\n# Trimming whitespace\nvar padded = \"  spaces  \"\nvar trimmed = padded.strip_edges()  # \"spaces\"\n\n# Converting to/from other types\nvar num_string = \"42\"\nvar number = int(num_string)  # 42\nvar float_string = \"3.14\"\nvar decimal = float(float_string)  # 3.14\nvar to_string = str(123)  # \"123\"\n\n# Path manipulation (useful in Godot)\nvar path = \"res://scenes/player.tscn\"\nvar filename = path.get_file()  # \"player.tscn\"\nvar extension = path.get_extension()  # \"tscn\"\nvar base = path.get_basename()  # \"res://scenes/player\"",
    "syntax_notes": "Use % for C-style formatting or .format() for named placeholders. Strings are immutable. Use .substr() for substrings. Godot has path-specific string methods like get_file(), get_extension().",
    "common_mistakes": "[\"Trying to modify strings in place (they're immutable)\", \"Forgetting [] brackets in % formatting\", \"Using + with non-strings without converting\", \"Not using res:// paths correctly\"]"
  },
  {
    "concept_id": "input-output",
    "language_id": "gdscript",
    "explanation": "In GDScript, print() outputs to the console. For game input, use Input.is_action_pressed() for actions defined in Project Settings. You can also display text in-game using Label nodes or rich text.",
    "code_example": "# Printing to console (Output panel in Godot)\nprint(\"Game started!\")\nprint(\"Player health:\", 100)\nprint(\"Position: \", Vector2(10, 20))\n\n# String formatting in print\nvar player_name = \"Hero\"\nvar level = 5\nprint(\"Welcome, %s! Level: %d\" % [player_name, level])\n\n# Print with variables\nvar health = 100\nvar mana = 50\nprint(\"Stats - HP: \", health, \" MP: \", mana)\n\n# Getting player input (keyboard/gamepad)\nfunc _process(delta):\n    # Check if action is currently pressed\n    if Input.is_action_pressed(\"ui_right\"):\n        print(\"Moving right\")\n    \n    if Input.is_action_pressed(\"ui_up\"):\n        print(\"Jumping\")\n    \n    # Check if action was just pressed this frame\n    if Input.is_action_just_pressed(\"ui_accept\"):  # Usually Enter/Space\n        print(\"Action button pressed!\")\n    \n    # Check if action was just released\n    if Input.is_action_just_released(\"ui_accept\"):\n        print(\"Action button released!\")\n\n# Getting mouse position\nfunc _input(event):\n    if event is InputEventMouseButton:\n        print(\"Mouse clicked at: \", event.position)\n    \n    if event is InputEventMouseMotion:\n        print(\"Mouse moved to: \", event.position)\n\n# Getting key presses\nfunc _input(event):\n    if event is InputEventKey and event.pressed:\n        print(\"Key pressed: \", event.keycode)\n        if event.keycode == KEY_SPACE:\n            print(\"Space bar pressed!\")\n\n# Displaying text in-game (requires Label node)\n@onready var label: Label = $Label\n\nfunc _ready():\n    label.text = \"Welcome to the game!\"\n    label.text = \"Score: %d\" % score\n\n# Rich text with colors (requires RichTextLabel)\n@onready var rich_label: RichTextLabel = $RichTextLabel\n\nfunc _ready():\n    rich_label.text = \"[color=red]Health: 50[/color]\"\n    rich_label.append_text(\"\\n[color=blue]Mana: 100[/color]\")\n\n# Debug drawing (visual debugging)\nfunc _draw():\n    draw_line(Vector2(0, 0), Vector2(100, 100), Color.RED)\n    draw_circle(Vector2(50, 50), 20, Color.BLUE)\n\n# Print to console with formatting\nprint_debug(\"Debug message\")  # Includes file/line info\nprint_rich(\"[color=green]Success![/color]\")  # Colored console output\npush_warning(\"This is a warning\")  # Warning in console\npush_error(\"This is an error\")  # Error in console",
    "syntax_notes": "print() outputs to Godot's Output panel. Use Input.is_action_pressed() for game controls. Define actions in Project > Project Settings > Input Map. Use @onready for node references. Label nodes display text in-game.",
    "common_mistakes": "[\"Forgetting to set up Input Map actions\", \"Using print() for in-game text instead of Label nodes\", \"Not understanding difference between is_action_pressed vs is_action_just_pressed\", \"Forgetting @onready decorator for node references\"]"
  },
  {
    "concept_id": "comments",
    "language_id": "gdscript",
    "explanation": "Comments in GDScript use # for single-line comments. Use docstrings (triple quotes) for function and class documentation. Good comments explain WHY, not WHAT. Comments are ignored by the engine.",
    "code_example": "# This is a single-line comment\n\n# Calculate damage after applying defense\nvar damage = attack - defense\n\n# Multi-line comment block\n# This function handles player movement\n# It takes delta time as a parameter\n# Returns the new position\n\n## Documentation comments (show up in editor help)\n## Use double ## for doc comments\n\n## Player movement script\n## Handles keyboard input and applies movement\nclass_name Player\nextends CharacterBody2D\n\n## Maximum movement speed in pixels per second\nconst SPEED = 200.0\n\n## Jump velocity (negative because up is negative Y)\nconst JUMP_VELOCITY = -400.0\n\n## Called every frame.\n## @param delta: Time elapsed since previous frame\nfunc _process(delta: float) -> void:\n    # Update player animation based on velocity\n    if velocity.x > 0:\n        $AnimatedSprite2D.flip_h = false  # Face right\n    elif velocity.x < 0:\n        $AnimatedSprite2D.flip_h = true  # Face left\n\n## Handles player taking damage\n## @param amount: Amount of damage to take\n## @param attacker: The node that dealt the damage\n## @return: Whether the player survived\nfunc take_damage(amount: int, attacker: Node) -> bool:\n    health -= amount\n    \n    # Flash red when damaged\n    modulate = Color.RED\n    await get_tree().create_timer(0.1).timeout\n    modulate = Color.WHITE\n    \n    # Check if dead\n    if health <= 0:\n        die()\n        return false\n    \n    return true\n\n# TODO: Add invincibility frames\n# FIXME: Player can fall through platforms sometimes\n# NOTE: This function is called from the enemy script\n# HACK: Temporary workaround until physics is fixed\n\n# Good comment - explains WHY\n# We multiply by 1.5 because critical hits deal 50% extra damage\nvar critical_damage = base_damage * 1.5\n\n# Bad comment - just restates code\n# Set health to 100\nhealth = 100\n\n# Region markers (for organizing code)\n#region Movement Functions\n\nfunc move_left():\n    velocity.x = -SPEED\n\nfunc move_right():\n    velocity.x = SPEED\n\n#endregion\n\n#region Combat Functions\n\nfunc attack():\n    print(\"Attack!\")\n\nfunc defend():\n    print(\"Defend!\")\n\n#endregion\n\n# Conditional compilation (comments that affect behavior)\n# @export makes variable visible in Inspector\n@export var health: int = 100\n\n# @onready initializes when node enters tree\n@onready var sprite: Sprite2D = $Sprite2D",
    "syntax_notes": "Use # for single-line comments. Use ## for documentation comments (appear in editor help). Comments can include TODO, FIXME, NOTE, HACK tags. Use #region/#endregion to organize code sections. @ annotations like @export, @onready are special.",
    "common_mistakes": "[\"Over-commenting obvious code\", \"Writing comments that contradict the code\", \"Not updating comments when code changes\", \"Using comments instead of writing clear code with good variable names\"]"
  }
]
