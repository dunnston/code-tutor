[
  {
    "concept_id": "reading-files",
    "language_id": "python",
    "explanation": "Python can read data from files using the open() function. Always close files after use, or use 'with' statement for automatic cleanup. Common modes: 'r' for read, 'w' for write, 'a' for append.",
    "code_example": "# Reading entire file\nwith open('story.txt', 'r') as file:\n    content = file.read()  # Read all content as string\n    print(content)\n\n# Reading line by line\nwith open('quests.txt', 'r') as file:\n    for line in file:\n        print(line.strip())  # strip() removes newline characters\n\n# Reading all lines into a list\nwith open('inventory.txt', 'r') as file:\n    lines = file.readlines()  # Returns list of lines\n    for line in lines:\n        print(line.strip())\n\n# Reading specific number of characters\nwith open('data.txt', 'r') as file:\n    first_100_chars = file.read(100)\n    print(first_100_chars)\n\n# Reading one line at a time\nwith open('scores.txt', 'r') as file:\n    line1 = file.readline()  # Read first line\n    line2 = file.readline()  # Read second line\n\n# Without 'with' statement (not recommended)\nfile = open('data.txt', 'r')\ncontent = file.read()\nfile.close()  # Must manually close!\n\n# Handling file not found\ntry:\n    with open('missing.txt', 'r') as file:\n        content = file.read()\nexcept FileNotFoundError:\n    print(\"File not found!\")\n\n# Reading and processing data\ntotal_score = 0\nwith open('scores.txt', 'r') as file:\n    for line in file:\n        score = int(line.strip())\n        total_score += score\nprint(f\"Total score: {total_score}\")\n\n# Reading CSV-style data\nwith open('characters.txt', 'r') as file:\n    for line in file:\n        name, level, health = line.strip().split(',')\n        print(f\"{name} - Level {level}, HP {health}\")",
    "syntax_notes": "Use 'with open()' for automatic file closing. 'r' mode is default for reading. Files are iterable - can loop directly. Use .strip() to remove whitespace/newlines. Handle FileNotFoundError exceptions.",
    "common_mistakes": "[\"Forgetting to close files (use 'with')\", \"Not handling FileNotFoundError\", \"Reading large files into memory at once\", \"Forgetting to strip newline characters\"]"
  },
  {
    "concept_id": "writing-files",
    "language_id": "python",
    "explanation": "Python writes data to files using open() with 'w' (overwrite) or 'a' (append) mode. 'w' creates a new file or overwrites existing. 'a' adds to the end. Always use 'with' for safety.",
    "code_example": "# Writing to a file (overwrites existing)\nwith open('output.txt', 'w') as file:\n    file.write(\"Welcome to the game!\\n\")\n    file.write(\"Your adventure begins here.\\n\")\n\n# Writing multiple lines at once\nlines = [\n    \"Level 1: Complete\\n\",\n    \"Level 2: Complete\\n\",\n    \"Level 3: In Progress\\n\"\n]\n\nwith open('progress.txt', 'w') as file:\n    file.writelines(lines)\n\n# Appending to a file (doesn't overwrite)\nwith open('log.txt', 'a') as file:\n    file.write(\"Player logged in\\n\")\n    file.write(\"Quest started\\n\")\n\n# Writing with formatting\nname = \"Hero\"\nlevel = 5\nscore = 1000\n\nwith open('player_data.txt', 'w') as file:\n    file.write(f\"Player: {name}\\n\")\n    file.write(f\"Level: {level}\\n\")\n    file.write(f\"Score: {score}\\n\")\n\n# Writing data from lists\ninventory = [\"sword\", \"shield\", \"potion\", \"helmet\"]\n\nwith open('inventory.txt', 'w') as file:\n    for item in inventory:\n        file.write(f\"{item}\\n\")\n\n# Writing structured data\ncharacters = [\n    {\"name\": \"Hero\", \"level\": 5, \"health\": 100},\n    {\"name\": \"Wizard\", \"level\": 3, \"health\": 80},\n    {\"name\": \"Archer\", \"level\": 4, \"health\": 90}\n]\n\nwith open('characters.csv', 'w') as file:\n    file.write(\"name,level,health\\n\")  # Header\n    for char in characters:\n        file.write(f\"{char['name']},{char['level']},{char['health']}\\n\")\n\n# Creating backup before overwriting\nimport os\n\nfilename = 'save_data.txt'\nif os.path.exists(filename):\n    with open(filename, 'r') as file:\n        backup = file.read()\n    with open(f\"{filename}.backup\", 'w') as file:\n        file.write(backup)\n\n# Now safe to overwrite original\nwith open(filename, 'w') as file:\n    file.write(\"New save data\\n\")\n\n# Writing with error handling\ntry:\n    with open('/restricted/file.txt', 'w') as file:\n        file.write(\"Data\")\nexcept PermissionError:\n    print(\"Cannot write to this location!\")\n\n# Reading and writing together\nwith open('input.txt', 'r') as infile:\n    with open('output.txt', 'w') as outfile:\n        for line in infile:\n            processed = line.upper()  # Process the line\n            outfile.write(processed)",
    "syntax_notes": "'w' mode overwrites/creates file. 'a' mode appends. write() doesn't add newlines automatically - add \\n manually. writelines() doesn't add newlines either. Use 'with' to ensure file closes.",
    "common_mistakes": "[\"Using 'w' when you meant 'a' (loses data!)\", \"Forgetting newline characters\", \"Not handling PermissionError\", \"Trying to write non-string data without converting\"]"
  },
  {
    "concept_id": "json-handling",
    "language_id": "python",
    "explanation": "JSON (JavaScript Object Notation) is a common format for storing and exchanging data. Python's json module converts between JSON strings and Python objects (dicts, lists). Use json.dump/dumps to write and json.load/loads to read.",
    "code_example": "import json\n\n# Python dict to JSON string\nplayer_data = {\n    \"name\": \"Hero\",\n    \"level\": 5,\n    \"health\": 100,\n    \"inventory\": [\"sword\", \"shield\", \"potion\"],\n    \"quests_completed\": 10,\n    \"is_online\": True\n}\n\njson_string = json.dumps(player_data)  # Convert to JSON string\nprint(json_string)\n# {\"name\": \"Hero\", \"level\": 5, \"health\": 100, ...}\n\n# Pretty-printed JSON\npretty_json = json.dumps(player_data, indent=4)\nprint(pretty_json)\n\n# JSON string to Python dict\njson_text = '{\"name\": \"Mage\", \"level\": 3, \"mana\": 50}'\ncharacter = json.loads(json_text)  # Convert from JSON string\nprint(character[\"name\"])  # \"Mage\"\n\n# Writing JSON to file\ngame_state = {\n    \"player\": {\"name\": \"Hero\", \"level\": 5},\n    \"enemies_defeated\": 25,\n    \"current_location\": \"Forest\",\n    \"inventory\": [\"sword\", \"potion\"]\n}\n\nwith open('save_game.json', 'w') as file:\n    json.dump(game_state, file, indent=4)  # dump (not dumps) for files\n\n# Reading JSON from file\nwith open('save_game.json', 'r') as file:\n    loaded_state = json.load(file)  # load (not loads) for files\n    print(loaded_state[\"player\"][\"name\"])  # \"Hero\"\n\n# Handling complex data structures\ncharacters = [\n    {\"name\": \"Warrior\", \"stats\": {\"str\": 10, \"dex\": 5}},\n    {\"name\": \"Mage\", \"stats\": {\"str\": 3, \"dex\": 7}},\n    {\"name\": \"Archer\", \"stats\": {\"str\": 6, \"dex\": 10}}\n]\n\nwith open('characters.json', 'w') as file:\n    json.dump(characters, file, indent=2)\n\n# Reading and modifying JSON\nwith open('config.json', 'r') as file:\n    config = json.load(file)\n\nconfig[\"difficulty\"] = \"hard\"  # Modify\nconfig[\"sound_enabled\"] = True\n\nwith open('config.json', 'w') as file:\n    json.dump(config, file, indent=4)  # Save changes\n\n# Handling JSON errors\ntry:\n    bad_json = '{\"name\": \"Hero\", level: 5}'  # Missing quotes around level\n    data = json.loads(bad_json)\nexcept json.JSONDecodeError as e:\n    print(f\"Invalid JSON: {e}\")\n\n# Converting Python objects to JSON (custom types)\nclass Character:\n    def __init__(self, name, level):\n        self.name = name\n        self.level = level\n    \n    def to_dict(self):\n        return {\"name\": self.name, \"level\": self.level}\n\nhero = Character(\"Hero\", 5)\njson_data = json.dumps(hero.to_dict(), indent=2)\nprint(json_data)\n\n# Working with JSON API responses\nimport json\n\napi_response = '{\"status\": \"success\", \"data\": {\"username\": \"player1\", \"score\": 1000}}'\nresponse = json.loads(api_response)\n\nif response[\"status\"] == \"success\":\n    username = response[\"data\"][\"username\"]\n    score = response[\"data\"][\"score\"]\n    print(f\"{username}: {score} points\")",
    "syntax_notes": "json.dumps() converts Python to JSON string. json.loads() converts JSON string to Python. json.dump() writes to file. json.load() reads from file. Use indent parameter for pretty printing.",
    "common_mistakes": "[\"Confusing dump/dumps and load/loads\", \"Trying to serialize custom objects without conversion\", \"Not handling JSONDecodeError\", \"Forgetting that JSON keys must be strings\"]"
  },
  {
    "concept_id": "csv-parsing",
    "language_id": "python",
    "explanation": "CSV (Comma-Separated Values) files store tabular data. Python's csv module makes it easy to read and write CSV files. Can also use simple string methods for basic CSV operations.",
    "code_example": "import csv\n\n# Reading CSV file\nwith open('scores.csv', 'r') as file:\n    csv_reader = csv.reader(file)\n    for row in csv_reader:\n        print(row)  # Each row is a list\n\n# Reading with header row\nwith open('players.csv', 'r') as file:\n    csv_reader = csv.reader(file)\n    header = next(csv_reader)  # Get header row\n    print(f\"Columns: {header}\")\n    \n    for row in csv_reader:\n        name, level, score = row\n        print(f\"{name} - Level {level}, Score {score}\")\n\n# Reading as dictionaries (easier with headers)\nwith open('players.csv', 'r') as file:\n    csv_reader = csv.DictReader(file)\n    for row in csv_reader:\n        print(f\"{row['name']} - Level {row['level']}\")\n        # Can access by column name!\n\n# Writing CSV file\nplayers = [\n    ['Hero', '5', '1000'],\n    ['Wizard', '3', '750'],\n    ['Archer', '4', '900']\n]\n\nwith open('output.csv', 'w', newline='') as file:\n    csv_writer = csv.writer(file)\n    csv_writer.writerow(['name', 'level', 'score'])  # Header\n    csv_writer.writerows(players)  # All data rows\n\n# Writing dictionaries to CSV\nplayers_dict = [\n    {'name': 'Hero', 'level': 5, 'score': 1000},\n    {'name': 'Wizard', 'level': 3, 'score': 750}\n]\n\nwith open('output.csv', 'w', newline='') as file:\n    fieldnames = ['name', 'level', 'score']\n    csv_writer = csv.DictWriter(file, fieldnames=fieldnames)\n    \n    csv_writer.writeheader()  # Write header\n    csv_writer.writerows(players_dict)  # Write data\n\n# Different delimiters (tab, semicolon, etc.)\nwith open('data.tsv', 'r') as file:\n    csv_reader = csv.reader(file, delimiter='\\t')  # Tab-separated\n    for row in csv_reader:\n        print(row)\n\n# Handling quotes and special characters\nwith open('quotes.csv', 'w', newline='') as file:\n    csv_writer = csv.writer(file, quoting=csv.QUOTE_NONNUMERIC)\n    csv_writer.writerow(['name', 'quote'])\n    csv_writer.writerow(['Hero', 'He said, \"Hello!\"'])\n\n# Processing CSV data\ntotal_score = 0\ncount = 0\n\nwith open('scores.csv', 'r') as file:\n    csv_reader = csv.DictReader(file)\n    for row in csv_reader:\n        total_score += int(row['score'])\n        count += 1\n\naverage = total_score / count if count > 0 else 0\nprint(f\"Average score: {average}\")\n\n# Simple CSV parsing without csv module (basic)\nwith open('data.csv', 'r') as file:\n    for line in file:\n        values = line.strip().split(',')  # Split by comma\n        print(values)\n\n# Filtering CSV data\nwith open('players.csv', 'r') as infile:\n    with open('high_level.csv', 'w', newline='') as outfile:\n        reader = csv.DictReader(infile)\n        fieldnames = reader.fieldnames\n        writer = csv.DictWriter(outfile, fieldnames=fieldnames)\n        \n        writer.writeheader()\n        for row in reader:\n            if int(row['level']) >= 5:  # Filter high level players\n                writer.writerow(row)\n\n# Handling missing values\nwith open('data.csv', 'r') as file:\n    csv_reader = csv.DictReader(file)\n    for row in csv_reader:\n        name = row.get('name', 'Unknown')  # Default if missing\n        level = int(row.get('level', '1'))  # Default level 1\n        print(f\"{name} - Level {level}\")",
    "syntax_notes": "Use csv.reader() for lists, csv.DictReader() for dictionaries. Use newline='' when opening files for writing. csv.writer() writes lists, csv.DictWriter() writes dicts. Handle headers separately or use DictReader/DictWriter.",
    "common_mistakes": "[\"Forgetting newline='' in write mode\", \"Not handling header rows properly\", \"Assuming all values are strings (need to convert types)\", \"Not closing files properly (use 'with')\"]"
  }
]
